<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <div class="card shadow-lg border-0 rounded-lg">
                <div class="card-header bg-primary text-white">
                    <h3 class="text-center fw-light my-2">피드백 세부 정보</h3>
                </div>
                <div class="card-body">
                    <table class="table table-hover">
                        <tbody>
                            <tr>
                                <th>피드백 번호</th>
                                <td><%= model[0].feedback_num %></td>
                            </tr>
                            <tr>
                                <th>사용자 번호</th>
                                <td><%= model[0].user_num %></td>
                            </tr>
                            <tr>
                                <th>제목</th>
                                <td><%= model[0].title %></td>
                            </tr>
                            <tr>
                                <th>내용</th>
                                <td><%= model[0].contents %></td>
                            </tr>
                            <tr>
                                <th>평가 점수</th>
                                <td><%= model[0].rating %></td>
                            </tr>
                            <tr>
                                <th>이미지 경로</th>
                                <td>
                                    <% if (model[0].image_path) { %>
                                    <div class="mt-2">
                                        <img src="<%= model[0].image_path.replace('C:/Users/user/Desktop/24project/1.0/frontend/admin-web/public/', '/public/') %>" alt="피드백 이미지" class="img-fluid rounded" style="width:300px">
                                    </div>
                                    <% } else { %>
                                    <span>이미지 없음</span>
                                    <% } %>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="card-footer text-end bg-transparent">
                    <button class="btn btn-danger me-2" onclick="deleteFeedback('<%= model[0].feedback_num %>')">피드백 삭제</button>
                    <button class="btn btn-primary" onclick="window.history.back()">뒤로 가기</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    function deleteFeedback(feedback_num) {
        if (confirm('정말로 이 피드백을 삭제하시겠습니까?')) {
            fetch('/service/feedback/' + feedback_num, {
                method: 'DELETE'
            })
            .then(response => response.json())
            .then(data => {
                alert(data.message);
                // 삭제 성공 시 /service/feedback 페이지로 이동
                window.location.href = '/service/feedback';
            })
            .catch(error => console.error('데이터 삭제 오류:', error));
        }
    }
</script>

